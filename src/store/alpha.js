export default {
    state: {
        // https://docs.github.com/en/free-pro-team@latest/github/searching-for-information-on-github/searching-users
        alphaList: [
            {
                "login": "mojombo",
                "id": 1,
                "node_id": "MDQ6VXNlcjE=",
                "avatar_url": "https://avatars0.githubusercontent.com/u/1?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mojombo",
                "html_url": "https://github.com/mojombo",
                "followers_url": "https://api.github.com/users/mojombo/followers",
                "following_url": "https://api.github.com/users/mojombo/following{/other_user}",
                "gists_url": "https://api.github.com/users/mojombo/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mojombo/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mojombo/subscriptions",
                "organizations_url": "https://api.github.com/users/mojombo/orgs",
                "repos_url": "https://api.github.com/users/mojombo/repos",
                "events_url": "https://api.github.com/users/mojombo/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mojombo/received_events",
                "type": "User",
                "site_admin": false,
                "name": "Tom Preston-Werner",
                "company": "@chatterbugapp, @redwoodjs, @preston-werner-ventures ",
                "blog": "http://tom.preston-werner.com",
                "location": "San Francisco",
                "email": null,
                "hireable": null,
                "bio": null,
                "twitter_username": "mojombo",
                "public_repos": 62,
                "public_gists": 62,
                "followers": 22290,
                "following": 11,
                "created_at": "2007-10-20T05:24:19Z",
                "updated_at": "2021-01-08T19:22:05Z"
            },
            {
                "login": "Alexeyyy",
                "id": 3105537,
                "node_id": "MDQ6VXNlcjMxMDU1Mzc=",
                "avatar_url": "https://avatars1.githubusercontent.com/u/3105537?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/Alexeyyy",
                "html_url": "https://github.com/Alexeyyy",
                "followers_url": "https://api.github.com/users/Alexeyyy/followers",
                "following_url": "https://api.github.com/users/Alexeyyy/following{/other_user}",
                "gists_url": "https://api.github.com/users/Alexeyyy/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/Alexeyyy/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/Alexeyyy/subscriptions",
                "organizations_url": "https://api.github.com/users/Alexeyyy/orgs",
                "repos_url": "https://api.github.com/users/Alexeyyy/repos",
                "events_url": "https://api.github.com/users/Alexeyyy/events{/privacy}",
                "received_events_url": "https://api.github.com/users/Alexeyyy/received_events",
                "type": "User",
                "site_admin": false,
                "name": "Alex Zhelepov",
                "company": "nastachku.ru",
                "blog": "",
                "location": "Ulsk",
                "email": null,
                "hireable": null,
                "bio": null,
                "twitter_username": null,
                "public_repos": 27,
                "public_gists": 0,
                "followers": 5,
                "following": 10,
                "created_at": "2012-12-22T15:13:05Z",
                "updated_at": "2021-01-08T17:14:01Z"
            },
            {
                "login": "mokevnin",
                "id": 308430,
                "node_id": "MDQ6VXNlcjMwODQzMA==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/308430?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/mokevnin",
                "html_url": "https://github.com/mokevnin",
                "followers_url": "https://api.github.com/users/mokevnin/followers",
                "following_url": "https://api.github.com/users/mokevnin/following{/other_user}",
                "gists_url": "https://api.github.com/users/mokevnin/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/mokevnin/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/mokevnin/subscriptions",
                "organizations_url": "https://api.github.com/users/mokevnin/orgs",
                "repos_url": "https://api.github.com/users/mokevnin/repos",
                "events_url": "https://api.github.com/users/mokevnin/events{/privacy}",
                "received_events_url": "https://api.github.com/users/mokevnin/received_events",
                "type": "User",
                "site_admin": false,
                "name": "Kirill Mokevnin",
                "company": "hexlet",
                "blog": "https://hexlet.io",
                "location": "Sunny Isles Beach, Fl, USA",
                "email": null,
                "hireable": true,
                "bio": null,
                "twitter_username": null,
                "public_repos": 52,
                "public_gists": 50,
                "followers": 635,
                "following": 1,
                "created_at": "2010-06-18T08:14:39Z",
                "updated_at": "2021-01-10T19:37:53Z"
            },
            {
                "login": "yegor256",
                "id": 526301,
                "node_id": "MDQ6VXNlcjUyNjMwMQ==",
                "avatar_url": "https://avatars3.githubusercontent.com/u/526301?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/yegor256",
                "html_url": "https://github.com/yegor256",
                "followers_url": "https://api.github.com/users/yegor256/followers",
                "following_url": "https://api.github.com/users/yegor256/following{/other_user}",
                "gists_url": "https://api.github.com/users/yegor256/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/yegor256/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/yegor256/subscriptions",
                "organizations_url": "https://api.github.com/users/yegor256/orgs",
                "repos_url": "https://api.github.com/users/yegor256/repos",
                "events_url": "https://api.github.com/users/yegor256/events{/privacy}",
                "received_events_url": "https://api.github.com/users/yegor256/received_events",
                "type": "User",
                "site_admin": false,
                "name": "Yegor Bugayenko",
                "company": "@huawei @zerocracy",
                "blog": "http://www.yegor256.com",
                "location": "Moscow, Russia",
                "email": null,
                "hireable": true,
                "bio": "Lab director at @Huawei; author of \"Elegant Objects\" book series (buy them on Amazon); founder of @zerocracy; creator of @zold-io",
                "twitter_username": "yegor256",
                "public_repos": 121,
                "public_gists": 6,
                "followers": 3391,
                "following": 4,
                "created_at": "2010-12-16T20:09:39Z",
                "updated_at": "2020-12-16T13:00:14Z"
            },
            {
                "login": "vgv",
                "id": 747988,
                "node_id": "MDQ6VXNlcjc0Nzk4OA==",
                "avatar_url": "https://avatars0.githubusercontent.com/u/747988?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/vgv",
                "html_url": "https://github.com/vgv",
                "followers_url": "https://api.github.com/users/vgv/followers",
                "following_url": "https://api.github.com/users/vgv/following{/other_user}",
                "gists_url": "https://api.github.com/users/vgv/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/vgv/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vgv/subscriptions",
                "organizations_url": "https://api.github.com/users/vgv/orgs",
                "repos_url": "https://api.github.com/users/vgv/repos",
                "events_url": "https://api.github.com/users/vgv/events{/privacy}",
                "received_events_url": "https://api.github.com/users/vgv/received_events",
                "type": "User",
                "site_admin": false,
                "name": "Vasily Vasilkov",
                "company": "@Ecwid",
                "blog": "https://twitter.com/2vgv",
                "location": "Ulyanovsk, Russia",
                "email": null,
                "hireable": null,
                "bio": null,
                "twitter_username": null,
                "public_repos": 16,
                "public_gists": 2,
                "followers": 22,
                "following": 2,
                "created_at": "2011-04-23T21:05:26Z",
                "updated_at": "2020-12-20T17:54:15Z"
            },
            {
                "login": "vladdy-moses",
                "id": 3105477,
                "node_id": "MDQ6VXNlcjMxMDU0Nzc=",
                "avatar_url": "https://avatars3.githubusercontent.com/u/3105477?v=4",
                "gravatar_id": "",
                "url": "https://api.github.com/users/vladdy-moses",
                "html_url": "https://github.com/vladdy-moses",
                "followers_url": "https://api.github.com/users/vladdy-moses/followers",
                "following_url": "https://api.github.com/users/vladdy-moses/following{/other_user}",
                "gists_url": "https://api.github.com/users/vladdy-moses/gists{/gist_id}",
                "starred_url": "https://api.github.com/users/vladdy-moses/starred{/owner}{/repo}",
                "subscriptions_url": "https://api.github.com/users/vladdy-moses/subscriptions",
                "organizations_url": "https://api.github.com/users/vladdy-moses/orgs",
                "repos_url": "https://api.github.com/users/vladdy-moses/repos",
                "events_url": "https://api.github.com/users/vladdy-moses/events{/privacy}",
                "received_events_url": "https://api.github.com/users/vladdy-moses/received_events",
                "type": "User",
                "site_admin": false,
                "name": "Vladislav Moiseev",
                "company": "AIS Gorod",
                "blog": "http://formoses.ru/",
                "location": "Ulyanovsk, Russia",
                "email": null,
                "hireable": null,
                "bio": null,
                "twitter_username": null,
                "public_repos": 21,
                "public_gists": 0,
                "followers": 20,
                "following": 20,
                "created_at": "2012-12-22T15:03:12Z",
                "updated_at": "2021-01-08T15:30:17Z"
            }
        ],
        lastRequest: {
            nickname: '',
            languages: [],
            location: '',
            reposCountRange: [] // количество репозиториев (нижняя и верхняя граница).
        },
        // Его потом надо будет грузить с сервера (пока хранится целый объект).
        savedAlphaList: []
    },
    mutations: {
        setAlphaList (state, payload) {
            state.alphaList = payload
        },
        saveAlpha (state, payload) {
            if (state.savedAlphaList.find(a => a.id === payload.id)) {
                return
            }
            state.savedAlphaList.push(payload)
        },
        saveRequest (state, { nickname, languages, location, reposCountRange }) {
            state.lastRequest.nickname = nickname
            state.languages = languages
            state.location = location
            state.reposCountRange = reposCountRange
        }
    },
    actions: {
        async searchAlphaUsers ({ commit }, {}) {
            commit('clearError')
            commit('setLoading', true)

            try {
                // Тут собственно запрос на GitHub.
                // А также перерасчет статистики по репозиториям.
                await new Promise((res, rej) => {
                    setTimeout(() => {
                        console.log('Users downloaded from gitHub, alphaList was refreshed!')

                        // Обновить список главное тоже не забыть.

                        // Запрос не забыть сохранить.
                        commit('setAlphaList', [])
                        res()
                    }, 3000)
                })
                commit('setLoading', false)
            } catch (error) {
                commit('setError', error.message)
                commit('setLoading', false)
            }
        },
        saveAlpha ({ commit }, payload) {
            commit('saveAlpha', payload)
            commit('setInfo', `Alpha ${payload.name} сохранен`)
        }
    },
    getters: {
        alphaList (state) {
            const saved = state.savedAlphaList.map(a => a.id)
            return state.alphaList.filter(a => !saved.includes(a.id))
        },
        savedAlphaList (state) {
            return state.savedAlphaList
        },
        getAlphaById: (state) => (id) => {
            return state.alphaList.find(a => a.id === id)
        }
    }
}